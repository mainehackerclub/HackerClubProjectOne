<html>
<head>
  <title>Hacker Club Project One</title>
  <script type="text/javascript" src="http://l2.io/ip.js?var=myip"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script type="text/javascript" src="src/d3/d3.js"></script>
  <script type="text/javascript" src="deploy.js"></script>
  <script>

    function Event(kind, method, url, data) {
      this.kind = kind;
      this.method = method;
      this.url = url;
      this.data = data;
    };
    
    function Client(IP, ID) {
      this.IP = IP;
      this.ID = ID;
    };

    var host = new Deploy().hostname;
    var server = 'http://'+host;
    var socket = io.connect(server);
    var randId = Math.floor(Math.random()*1000000000);
    var client = new Client(myip, randId);
    var event = new Event('web', 'hit', '/', client); 
    console.log(event);
    socket.emit('clientIP', event);
    console.log(myip);
    socket.on('hit', function(data) {
      console.log(data);
    });

  </script>
</head>
<body>
  A beginning.
  <div id="wow1"></div>
  <script type="text/javascript">
    var wow1 = d3.select("#wow1")
        .append("svg")
        .attr("width", 300)
        .attr("height", 300);

    wow1.append("circle")
      .style("stroke", "gray")
      .style("fill", "yellow")
      .attr("r", 90)
      .attr("cx", 100)
      .attr("cy", 100);

   socket.on('pulse', function(data) {
       console.log(data.r);
       console.log(data.fill);
       var circle = wow1.selectAll("circle");
       circle.transition()
         .duration(1000)
         .attr("r",data.r)
         .style("fill",data.fill);
       console.log(data);
       });

  </script>
  <p>
  Use this command to update the radius and color of the circle:<br>
  curl -i -H "Content-type: application/json" -X POST http://hc1.goodnyou.me:8082/pulse -d '{"r":"60","fill":"green"}'
  </p>
  <p>
  <a href="force-hcp1.html">dynamic force demo</a>
  </p>
</body>
</html>
